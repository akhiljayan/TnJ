{% extends 'TomJerryBundle:DefaultMaster:masterAdmin.html.twig' %} 
{% block title %} Admin-Login {% endblock %}

{% block styleInAdminPage %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/tomjerry/admin/css/graph.css') }}">
    <link href="{{ asset('bundles/tomjerry/admin/vendor/fine-uploader/fine-uploader-new.css') }}" rel="stylesheet">
    <style type="text/css">
        #trigger-upload {
            color: white;
            background-color: #00ABC7;
            font-size: 14px;
            padding: 7px 20px;
            background-image: none;
        }

        #fine-uploader-manual-trigger .qq-upload-button {
            margin-right: 15px;
        }

        #fine-uploader-manual-trigger .buttons {
            width: 36%;
        }

        #fine-uploader-manual-trigger .qq-uploader .qq-total-progress-bar-container {
            width: 60%;
        }

    </style>
{% endblock %}

{% block adminContent %}

    <section>
        <div class="left-side sticky-left-side">
            <div class="logo">
                <h1><a href="index.html">Easy <span>Admin</span></a></h1>
            </div>
            <div class="logo-icon text-center">
                <a href="index.html"><i class="lnr lnr-home"></i> </a>
            </div>

            <div class="left-side-inner">
                <ul class="nav nav-pills nav-stacked custom-nav">

                    <li>
                        <a href="{{path('_index')}}">
                            <i class="lnr lnr-power-switch"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>

                    <li class="menu-list">
                        <a href="#">
                            <i class="lnr lnr-cog"></i>
                            <span>About Us</span>
                        </a>
                        <ul class="sub-menu-list">
                            <li><a href="grids.html">Discription</a> </li>
                            <li><a href="widgets.html">Sponsors</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="tables.html">
                            <i class="lnr lnr-menu"></i> 
                            <span>Staffs</span>
                        </a>
                    </li>    

                    <li>
                        <a href="tables.html">
                            <i class="lnr lnr-menu"></i> 
                            <span>Services</span>
                        </a>
                    </li>    

                    <li class="active">
                        <a href="{{path('admin_redirect_galary')}}">
                            <i class="lnr lnr-pencil"></i> 
                            <span>Galary</span>
                        </a>
                    </li>

                    <li class="menu-list">
                        <a href="#">
                            <i class="lnr lnr-book"></i>  
                            <span>User Managements</span>
                        </a> 
                        <ul class="sub-menu-list">
                            <li><a href="sign-in.html">Admin User List</a> </li>
                            <li><a href="sign-up.html">Register New Admin</a></li>
                        </ul>
                    </li>
                </ul>
                <!--sidebar nav end-->
            </div>
        </div>
        <!-- left side end-->

        <!-- main content start-->
        <div class="main-content">
            <!-- header-starts -->
            <div class="header-section">

                <!--toggle button start-->
                <a class="toggle-btn  menu-collapsed"><i class="fa fa-bars"></i></a>
                <!--toggle button end-->

                <!--notification menu start -->
                <div class="menu-right">
                    <div class="user-panel-top">  	
                        <div class="profile_details_left">
                            <ul class="nofitications-dropdown">
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                        <i class="fa fa-envelope"></i><span class="badge">0</span>
                                    </a>

                                    <ul class="dropdown-menu">
                                        <li>
                                            <div class="notification_header">
                                                <h3>You have 0 new messages</h3>
                                            </div>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);" style="cursor: not-allowed">
                                                <div class="user_img"><img src="{{ asset('bundles/tomjerry/admin/images/1.png') }}" alt=""></div>
                                                <div class="notification_desc">
                                                    <p>List Down Messages(servise disabled)</p>
                                                    <p><span>Count</span></p>
                                                </div>
                                                <div class="clearfix"></div>	
                                            </a>
                                        </li>
                                        <li>
                                            <div class="notification_bottom">
                                                <a href="javascript:void(0);" style="cursor: not-allowed">See all messages</a>
                                            </div> 
                                        </li>
                                    </ul>
                                </li>
                                <li class="login_box" id="loginContainer">
                                    <div class="search-box">
                                        <div id="sb-search" class="sb-search">
                                            <form>
                                                <input class="sb-search-input" placeholder="Enter your search term..." type="search" id="search">
                                                <input class="sb-search-submit" type="submit" value="">
                                                <span class="sb-icon-search"> </span>
                                            </form>
                                        </div>
                                    </div>
                                </li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bell"></i><span class="badge blue">0</span></a>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <div class="notification_header">
                                                <h3>You have 0 new notification</h3>
                                            </div>
                                        </li>
                                        <li>
                                            <a href="javascript:void(0);" style="cursor: not-allowed">
                                                <div class="user_img"><img src="{{ asset('bundles/tomjerry/admin/images/1.png') }}" alt=""></div>
                                                <div class="notification_desc">
                                                    <p>List Down Notifications(servise disabled)</p>
                                                    <p><span>Count</span></p>
                                                </div>
                                                <div class="clearfix"></div>	
                                            </a>
                                        </li>
                                        <li>
                                            <div class="notification_bottom">
                                                <a href="javascript:void(0);" style="cursor: not-allowed">See all notification</a>
                                            </div> 
                                        </li>
                                    </ul>
                                </li>	
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-tasks"></i><span class="badge blue1">0</span></a>
                                    <ul class="dropdown-menu">
                                        <li>
                                            <div class="notification_header">
                                                <h3>You have 0 pending task</h3>
                                            </div>
                                        </li>
                                        <li>
                                        <li>
                                            <a href="javascript:void(0);" style="cursor: not-allowed">
                                                <div class="user_img"><img src="{{ asset('bundles/tomjerry/admin/images/1.png') }}" alt=""></div>
                                                <div class="notification_desc">
                                                    <p>List Down Pending Tasks(servise disabled)</p>
                                                    <p><span>Count</span></p>
                                                </div>
                                                <div class="clearfix"></div>	
                                            </a>
                                        </li>
                                        <li>
                                            <div class="notification_bottom">
                                                <a href="javascript:void(0);" style="cursor: not-allowed">See all pending tasks</a>
                                            </div> 
                                        </li>
                                </li>
                            </ul>
                            </li>		   							   		
                            <div class="clearfix"></div>	
                            </ul>
                        </div>
                        <div class="profile_details">		
                            <ul>
                                <li class="dropdown profile_details_drop">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                        <div class="profile_img">	
                                            <span style="background:url({{ asset('bundles/tomjerry/admin/images/1.jpg') }}) no-repeat center"> </span> 
                                            <div class="user-name">
                                                <p>{{app.user.username}}
                                                    <span>
                                                        {%if is_granted('ROLE_TMJR_SUPERUSER')%}
                                                            Super-Admin
                                                        {%elseif is_granted('ROLE_TMJR_ADMIN')%}
                                                            Administrator
                                                        {%else%}
                                                            User
                                                        {%endif%}
                                                    </span>
                                                </p>
                                            </div>
                                            <i class="lnr lnr-chevron-down"></i>
                                            <i class="lnr lnr-chevron-up"></i>
                                            <div class="clearfix"></div>	
                                        </div>	
                                    </a>
                                    <ul class="dropdown-menu drp-mnu">
                                        <li> <a href="#"><i class="fa fa-cog"></i> Settings</a> </li> 
                                        <li> <a href="#"><i class="fa fa-user"></i>Profile</a> </li> 
                                        <li> <a href="{{ path('_logout') }}"><i class="fa fa-sign-out"></i> Logout</a></li>
                                    </ul>
                                </li>
                                <div class="clearfix"> </div>
                            </ul>
                        </div>		
                        <div class="clearfix"></div>
                    </div>
                </div>
                <!--notification menu end -->
            </div>
            <!-- //header-ends -->
            <div id="page-wrapper">
                <div class="graphs">
                    <div class="col_3">
                        <div class="r3_counter_box">
                            <div id="fine-uploader-manual-trigger"></div>
                            <div class="stats">
                                <div id="galary-table">
                                    {{ render(controller('TomJerryBundle:Admin:renderGalaryImgTable')) }}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-1"></div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <p>&copy 2016 Aegizure Technologies | Design by <a href="#">Akhil Jayan</a></p>
        </footer>
    </section>

{% endblock %}

{% block jsInAdminPage %}
    {{ parent() }}
    <script src="{{ asset('bundles/tomjerry/admin/js/classie.js') }}"></script>
    <script src="{{ asset('bundles/tomjerry/admin/js/uisearch.js') }}"></script>
    <script>new UISearch(document.getElementById('sb-search'));</script>
    <script src="{{ asset('bundles/tomjerry/admin/js/jquery.flot.min.js') }}" type = "text/javascript" ></script>
    <script src="{{ asset('bundles/tomjerry/admin/vendor/fine-uploader/jquery.fine-uploader.js') }}"></script>
    <!-- Fine Uploader Thumbnails template w/ customization
    ====================================================================== -->
    <script type="text/template" id="qq-template-manual-trigger">
        <div class="qq-uploader-selector qq-uploader" qq-drop-area-text="Drop files here">
        <div class="qq-total-progress-bar-container-selector qq-total-progress-bar-container">
        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-total-progress-bar-selector qq-progress-bar qq-total-progress-bar"></div>
        </div>
        <div class="qq-upload-drop-area-selector qq-upload-drop-area" qq-hide-dropzone>
        <span class="qq-upload-drop-area-text-selector"></span>
        </div>
        <div class="buttons">
        <div class="qq-upload-button-selector qq-upload-button">
        <div>Select files</div>
        </div>
        <button type="button" id="trigger-upload" class="btn btn-primary">
        <i class="icon-upload icon-white"></i> Upload
        </button>
        </div>
        <span class="qq-drop-processing-selector qq-drop-processing">
        <span>Processing dropped files...</span>
        <span class="qq-drop-processing-spinner-selector qq-drop-processing-spinner"></span>
        </span>
        <ul class="qq-upload-list-selector qq-upload-list" aria-live="polite" aria-relevant="additions removals">
        <li>
        <div class="qq-progress-bar-container-selector">
        <div role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="qq-progress-bar-selector qq-progress-bar"></div>
        </div>
        <span class="qq-upload-spinner-selector qq-upload-spinner"></span>
        <img class="qq-thumbnail-selector" qq-max-size="100" qq-server-scale>
        <span class="qq-upload-file-selector qq-upload-file"></span>
        <span class="qq-edit-filename-icon-selector qq-edit-filename-icon" aria-label="Edit filename"></span>
        <input class="qq-edit-filename-selector qq-edit-filename" tabindex="0" type="text">
        <span class="qq-upload-size-selector qq-upload-size"></span>
        <button type="button" class="qq-btn qq-upload-cancel-selector qq-upload-cancel">Cancel</button>
        <button type="button" class="qq-btn qq-upload-retry-selector qq-upload-retry">Retry</button>
        <button type="button" class="qq-btn qq-upload-delete-selector qq-upload-delete">Delete</button>
        <span role="status" class="qq-upload-status-text-selector qq-upload-status-text"></span>
        </li>
        </ul>

        <dialog class="qq-alert-dialog-selector">
        <div class="qq-dialog-message-selector"></div>
        <div class="qq-dialog-buttons">
        <button type="button" class="qq-cancel-button-selector">Close</button>
        </div>
        </dialog>

        <dialog class="qq-confirm-dialog-selector">
        <div class="qq-dialog-message-selector"></div>
        <div class="qq-dialog-buttons">
        <button type="button" class="qq-cancel-button-selector">No</button>
        <button type="button" class="qq-ok-button-selector">Yes</button>
        </div>
        </dialog>

        <dialog class="qq-prompt-dialog-selector">
        <div class="qq-dialog-message-selector"></div>
        <input type="text">
        <div class="qq-dialog-buttons">
        <button type="button" class="qq-cancel-button-selector">Cancel</button>
        <button type="button" class="qq-ok-button-selector">Ok</button>
        </div>
        </dialog>
        </div>
    </script>
    <script type="text/javascript">
        $(document).ready(function () {

            $("body").on('change', ".onoffswitch-checkbox", function () {
                var guId = $(this).data("guid");
                var path = "{{path('enable_disable_img',{'guId':'__guId__'})}}";
                path = path.replace('__guId__', guId);
                if ($(this).prop('checked')) {
                    var flag = "on";
                } else {
                    var flag = "off";
                }
                $.ajax({
                    type: "POST",
                    url: path,
                    data: {'flag': flag},
                    beforeSend: function () {
                    },
                    success: function ($data) {
                        if ($data) {
                        }
                    },
                    complete: function () {
                    }
                });
            });

            $("body").on('click', ".add-edit-display-title", function () {
                var pur = $(this).data("pur");
                if (pur === 'ED') {
                    var dataDisp = $(this).data("disptext");
                    $("#display-name-input").val(dataDisp);
                }
                $("#myModal").modal('show');
                var guId = $(this).data("id");
                $('#hidden-input-guid').val(guId);
                $('#hidden-input-pur').val(pur);
            });

            $("body").on('click', "#display-text-submit", function () {
                var pur = $('#hidden-input-pur').val();
                var dispName = $("#display-name-input").val();
                var guId = $('#hidden-input-guid').val();
                var path = "{{path('add_display_title_img',{'guId':'__guId__'})}}";
                path = path.replace('__guId__', guId);
                var reloadPath = "{{path('render_galary_image_table')}}";
                $.ajax({
                    type: "POST",
                    url: path,
                    data: {'dispName': dispName, 'pur': pur},
                    beforeSend: function () {
                    },
                    success: function ($data) {
                        if ($data) {
                            $('#galary-table').load(reloadPath);
                            $("#myModal").modal('hide');
                        }
                    },
                    complete: function () {
                    }
                });
            });


            var endpointm = "{{path('uploading_end_point')}}";
            var waitingGeneric = "{{ asset('bundles/tomjerry/admin/vendor/fine-uploader/placeholders/waiting-generic.png') }}";
            var notAvailable = "{{ asset('bundles/tomjerry/admin/vendor/fine-uploader/placeholders/not_available-generic.png') }}";
            $('#fine-uploader-manual-trigger').fineUploader({
                template: 'qq-template-manual-trigger',
                request: {
                    endpoint: endpointm
                },
                thumbnails: {
                    placeholders: {
                        waitingPath: waitingGeneric,
                        notAvailablePath: notAvailable
                    }
                },
                callbacks: {
                    onUpload: function (id, name) {
                        $(".qq-file-id-" + id + " > .qq-upload-status-text").removeClass('qq-hide');
                        $(".qq-file-id-" + id + " > .qq-upload-status-text").html('Upload Successfull');
                    }
                },
                autoUpload: false
            });

            $('#trigger-upload').click(function () {
                $('#fine-uploader-manual-trigger').fineUploader('uploadStoredFiles');
            });
        });

        $(document).ready(function () {

            var graphData = [{
                    data: [[4, 4500], [5, 3500], [6, 6550], [7, 7600], [8, 4500], [9, 3500], [10, 6550], ],
                    color: '#FFCA28',
                    points: {radius: 7, fillColor: '#fff'}
                }
            ];

            $.plot($('#graph-lines'), graphData, {
                series: {
                    points: {
                        show: true,
                        radius: 1
                    },
                    lines: {
                        show: true
                    },
                    shadowSize: 0
                },
                grid: {
                    color: '#fff',
                    borderColor: 'transparent',
                    borderWidth: 10,
                    hoverable: true
                },
                xaxis: {
                    tickColor: 'transparent',
                    tickDecimals: false
                },
                yaxis: {
                    tickSize: 1200
                }
            });
            $('#graph-bars').hide();

            $('#lines').on('click', function (e) {
                $('#bars').removeClass('active');
                $('#graph-bars').fadeOut();
                $(this).addClass('active');
                $('#graph-lines').fadeIn();
                e.preventDefault();
            });

            $('#bars').on('click', function (e) {
                $('#lines').removeClass('active');
                $('#graph-lines').fadeOut();
                $(this).addClass('active');
                $('#graph-bars').fadeIn().removeClass('hidden');
                e.preventDefault();
            });

        });
    </script>
{% endblock %}